# Railway.toml - Configuração de múltiplos serviços
# Este arquivo configura o deploy do MCP Câmara BR no Railway

[build]
builder = "NIXPACKS"
buildCommand = "npm install && npm run build"

[deploy]
startCommand = "node dist/mcp-sse-server.js"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Variáveis de ambiente do serviço principal
[[deploy.environmentVariables]]
name = "NODE_ENV"
value = "production"

[[deploy.environmentVariables]]
name = "PORT"
value = "${{PORT}}"

[[deploy.environmentVariables]]
name = "LOG_LEVEL"
value = "info"

[[deploy.environmentVariables]]
name = "CACHE_ENABLED"
value = "true"

[[deploy.environmentVariables]]
name = "METRICS_ENABLED"
value = "true"

[[deploy.environmentVariables]]
name = "RATE_LIMIT_ENABLED"
value = "true"

# Configurações de recursos
[deploy.resources]
memory = "512Mi"
cpu = "0.5"

# Exposição de porta
[deploy.ports]
http = 9090
